# RAID
## 第一章 题目分析
### 1.1 题目描述 
程序模拟实现 RAID0、1、3、5、6、01、10 的文件读写、删除、恢复功能。 
### 1.2 任务概述 
（1）RAID0 RAID0 将 n 个磁盘进行组合，将每个磁盘划分为若干块，标记块号，所有磁盘的同一块号组合形成一 个条带。文件存储时，以条带为存储单位，分散存储在不同的磁盘上。可以通过同时读写不同的磁盘来提 高效率。但是任一磁盘出现损坏后，所有文件都无法进行恢复。 
（2）RAID1 RAID1 将磁盘两两组合，互为镜像。文件存储时同时存储两份，写磁盘效率不变，读磁盘效率提高两 倍。两个组合磁盘中任一个磁盘损坏后，都可以进行恢复操作。 
（3）RAID01 RAID01 将磁盘分成两份，内部使用 RAID0 的条带存储，两份之间使用 RAID1 互为镜像。提升了读写 效率，同时可以进行容错恢复。 
（4）RAID10 RAID10 每块磁盘都有一个镜像盘，所有的磁盘对互相之间使用 RAID0 的条带存储。效率和容错与 RAID01 相同。 
（5）RAID3 RAID3 取一个特定的盘作为校验盘，其他磁盘使用 RAID0 条带存储，校验盘的每块存储对应条带的奇 偶校验码。在 RAID0 的基础上增加了容错功能。 （6）RAID5 RAID5 在 RAID3 的基础上进行了更改，取消了特定校验盘，将校验码和数据一起分散在条带的不同块 上。任意一个磁盘损坏，都可以进行恢复。 
（7）RAID6 RAID6 在 RAID5 的基础上，变为两种校验操作 P 和 Q。P 是奇偶校验，Q 是伽罗华域乘积再进行异或 操作。两种不同的校验方法可以允许两个磁盘同时损坏。 
## 第二章 总体设计 
## 2.1 系统概要设计 
### 2.1.1 功能需求 
在不同 RAID 结构上实现以下功能： 
（1）文件写入。输入文件名和文件内容，将文件存储到模拟磁盘。 1
（2）文件读取。输入文件名，从模拟磁盘中读出文件内容。 
（3）文件删除。输入文件名，从模拟磁盘中删除该文件。 
（4）模拟磁盘损坏与恢复。设置坏磁盘并能够进行磁盘数据恢复。 拓展功能：UI 界面展示上述功能。
### 2.1.2 运行环境 
（1）操作系统：Windows （2）编程语言：Java、Javafx 
### 2.1.3 概念结构设计 
（1）磁盘 使用一个文件夹表示一种 RAID 类型，例如文件夹“RAID0”表示 RAID0。文件夹内部使用一个文本文件 表示一个磁盘，命名为从 0 开始的磁盘编号，例如“0.txt”。 
（2）磁盘管理文件 使用磁盘管理文件存储磁盘的每块空间是否空闲。格式为“磁盘号 块号 是否空闲”，其中 0 表示空闲、 1 表示占用。例如“0 1 0”表示 0 号磁盘的 1 号块为空闲。同时设置与之对应的 list。程序运行时建立 list， 数据读取和修改都针对 list 进行，然后再进行管理文件更新操作。 
（3）文件管理文件 使用文件管理文件存储磁盘上所有文件的占用盘号。格式为“文件名 、占用块数、磁盘号 块号”，其 中顿号表示换行。例如“file1、2、0 0、1 0”表示文件名为“file1”的文件占用了两块空间，分别是 0 号磁盘的 0 号块和 1 号磁盘的 0 号块。设置 list 与（2）相同。 
（4）磁盘状态管理 使用一个数组 Dstate 存储磁盘状态，0 表示正常，1 表示损坏。 图 1 文件模拟磁盘 2
## 2 框架设计
### 2.2.1 类设计 
 （1）RAID 设置 RAID 类，存放与磁盘相关的值以及初始化磁盘文件。存储包括磁盘个数、磁盘容量、块容量、 磁盘文件地址等内容。实例化时创建磁盘文件。 
 （2）Manage Manage 是 RAID 管理器。RAID 类存储与磁盘相关的内容，而 Manage 则实现 RAID 管理功能。例如 写入文件时，根据 RAID 种类来分配磁盘存储位置并记录。Manage 设置一个基类，存放不同类型 RAID 的 相同的方法，实现代码重用。其他 Manage 继承此基类，根据不同类型 RAID 的特性进行函数重载。其中 RAID01 和 RAID10 都是条带存储＋镜像，可以继承 RAID0，而 RAID5 和 RAID6 都是条带存储+校验盘，可 以继承 RAID3。RAID1 则是按磁盘存储，单列出来继承基类。 图 2 类继承关系 
 （3）Transform Transform 类包含了字符和二进制编码互相转换的函数，是一个工具类。
 （4）Q 类主要是进行 Q 校验的相关运算，包括正向表和反向表的计算，以及乘法和除法计算。 2.2.2 UI 设计 根据要实现的功能设计了如下的 UI。 首先需要点击初始化按钮将 RAID 选项初始化。（因为 JavaFX 使用不熟练，不知道怎么才能界面运行 时就进行下拉框初始化，就使用了一个笨方法，将初始化代码写在了初始化按钮的函数中。）选择 RAID 类 型后点击确定，就进行了 Manage 实例的创建； 输入文件名和文件内容后点击写文件就可以进行文件写入；点击读文件和删除文件按钮就会进行相应 的操作。右上方输入数字点击设置坏磁盘按钮就可以更改磁盘状态，将输入数字对应的磁盘设置为坏磁盘，点 击下方修复按钮就会进行磁盘修复。操作结果会在输出框输出。
